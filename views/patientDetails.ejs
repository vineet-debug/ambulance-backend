<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Patient Details</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="/css/admin.css">
</head>

<body class="hold-transition">
  <div class="wrapper">
    <%- include('sidebar') %>

    <div class="content-wrapper">
      <div class="content-header py-2">
        <div class="container-fluid d-flex justify-content-between align-items-center">
          <h1 class="m-0">Patient Details</h1>
          <a href="/admin/patients" class="btn btn-secondary btn-sm">
            <i class="fas fa-arrow-left mr-1"></i>Back to list
          </a>
        </div>
      </div>

      <section class="content pt-0">
        <div class="container-fluid">
          <% if (error && error.length) { %>
            <div class="alert alert-danger mb-2"><%= error[0] %></div>
          <% } %>

          <div class="card">
            <div class="card-body">
              <div class="row">
                <!-- Profile Picture -->
                <div class="col-md-3 text-center mb-3">
                  <% if (patient.profilePic) { %>
                    <img src="/uploads/<%= patient.profilePic %>" alt="Profile Pic" class="img-fluid rounded-circle border" style="max-width: 150px;">
                  <% } else { %>
                    <div class="bg-light border rounded-circle d-flex align-items-center justify-content-center" style="width: 150px; height: 150px;">
                      <i class="fas fa-user text-muted" style="font-size: 60px;"></i>
                    </div>
                  <% } %>
                </div>

                <!-- Patient Info -->
                <div class="col-md-9">
                  <table class="table table-bordered mb-0">
                    <tr><th style="width:180px;">Full Name</th><td><%= patient.fullName || 'N/A' %></td></tr>
                    <tr><th>Email</th>   <td><%= patient.email   || 'N/A' %></td></tr>
                    <tr><th>Phone</th>   <td><%= patient.phone   || 'N/A' %></td></tr>
                    <tr><th>Gender</th>  <td><%= patient.gender  || 'N/A' %></td></tr>
                    <tr><th>Age</th>     <td><%= patient.age     || 'N/A' %></td></tr>
                    <tr><th>Blood Group</th><td><%= patient.bloodGroup || 'N/A' %></td></tr>
                    <tr><th>Address</th><td><%= patient.address || 'N/A' %></td></tr>
                    <tr><th>Status</th>
                        <td>
                          <span class="badge <%= patient.active ? 'badge-success' : 'badge-secondary' %>">
                            <%= patient.active ? 'Active' : 'Inactive' %>
                          </span>
                        </td>
                    </tr>
                    <tr><th>Created At</th>
                        <td><%= patient.createdAt ? patient.createdAt.toLocaleString() : 'N/A' %></td></tr>
                    <tr><th>Updated At</th>
                        <td><%= patient.updatedAt ? patient.updatedAt.toLocaleString() : 'N/A' %></td></tr>
                  </table>
                </div>
              </div>
            </div>
          </div>

        </div><!-- /.container -->
      </section>
    </div><!-- /.content-wrapper -->
  </div><!-- /.wrapper -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
</body>
</html>
