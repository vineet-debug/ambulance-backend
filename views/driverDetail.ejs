<!-- views/driverDetail.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Driver Detail</title>
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <link rel="stylesheet" href="/css/admin.css">
</head>
<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <!-- Sidebar -->
    <%- include('sidebar') %>

    <!-- Content Wrapper -->
    <div class="content-wrapper">
      <!-- Header -->
      <section class="content-header">
        <div class="container-fluid">
          <div class="row mb-2 align-items-center">
            <div class="col-sm-6">
              <h1>Driver Detail</h1>
            </div>
            <div class="col-sm-6 text-right">
              <a href="/admin/drivers" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to List
              </a>
            </div>
          </div>
        </div>
      </section>

      <!-- Main -->
      <section class="content">
        <div class="container-fluid">
          <div class="card card-default">
            <div class="card-header">
              <h3 class="card-title">Edit Driver</h3>
            </div>
            <form action="/admin/drivers/<%= driver._id %>/update"
                  method="POST"
                  enctype="multipart/form-data">
              <div class="card-body">
                <div class="form-group">
                  <label>Full Name</label>
                  <input name="fullName"
                         value="<%= driver.fullName %>"
                         class="form-control"
                         required />
                </div>
                <div class="form-group">
                  <label>Email</label>
                  <input name="email"
                         type="email"
                         value="<%= driver.email %>"
                         class="form-control"
                         required />
                </div>
                <div class="form-group">
                  <label>Phone</label>
                  <input name="phone"
                         value="<%= driver.phone %>"
                         class="form-control"
                         required />
                </div>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label>Gender</label>
                    <select name="gender" class="form-control">
                      <option value="Male"
                        <%= driver.gender==='Male'? 'selected':'' %>>
                        Male
                      </option>
                      <option value="Female"
                        <%= driver.gender==='Female'? 'selected':'' %>>
                        Female
                      </option>
                    </select>
                  </div>
                  <div class="form-group col-md-6">
                    <label>License Number</label>
                    <input name="licenseNumber"
                           value="<%= driver.licenseNumber %>"
                           class="form-control"
                           required />
                  </div>
                </div>
                <div class="form-group">
                  <label>Profile Picture</label><br>
                  <img src="/uploads/<%= driver.profilePic %>"
                       width="100"
                       class="img-circle elevation-2 mb-2" /><br>
                  <input type="file"
                         name="profilePic"
                         accept="image/*"
                         class="form-control-file" />
                </div>
                <div class="form-group">
                  <label>License Copy</label><br>
                  <a href="/uploads/<%= driver.licenseCopy %>"
                     target="_blank">
                    <i class="fas fa-file-pdf"></i> View Current
                  </a><br>
                  <input type="file"
                         name="licenseCopy"
                         accept="image/*,application/pdf"
                         class="form-control-file" />
                </div>
                <h5 class="mt-4">Address</h5>
                <div class="form-group">
                  <input name="addressLine1"
                         placeholder="Line 1"
                         value="<%= driver.address?.line1 %>"
                         class="form-control"
                         required />
                </div>
                <div class="form-group">
                  <input name="addressLine2"
                         placeholder="Line 2"
                         value="<%= driver.address?.line2 %>"
                         class="form-control" />
                </div>
                <div class="form-row">
                  <div class="form-group col-md-4">
                    <input name="city"
                           placeholder="City"
                           value="<%= driver.address?.city %>"
                           class="form-control"
                           required />
                  </div>
                  <div class="form-group col-md-4">
                    <input name="state"
                           placeholder="State"
                           value="<%= driver.address?.state %>"
                           class="form-control"
                           required />
                  </div>
                  <div class="form-group col-md-4">
                    <input name="postalCode"
                           placeholder="Postal Code"
                           value="<%= driver.address?.postalCode %>"
                           class="form-control"
                           required />
                  </div>
                </div>
                <h5 class="mt-4">Update Password</h5>
                <div class="form-row">
                  <div class="form-group col-md-6">
                    <label>New Password</label>
                    <input type="password"
                           name="password"
                           class="form-control"
                           placeholder="Leave blank to keep existing" />
                  </div>
                  <div class="form-group col-md-6">
                    <label>Confirm Password</label>
                    <input type="password"
                           name="confirmPassword"
                           class="form-control" />
                  </div>
                </div>
              </div>
              <div class="card-footer text-right">
                <button type="submit"
                        class="btn btn-success">
                  <i class="fas fa-save"></i> Save Changes
                </button>
                <a href="/admin/drivers"
                   class="btn btn-secondary">
                  Cancel
                </a>
              </div>
            </form>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script
    src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js">
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js">
  </script>
  <script
    src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js">
  </script>
</body>
</html>
